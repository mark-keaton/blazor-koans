@using BlazorKoans.App.Models
@using global::Radzen.Blazor
@using global::Radzen
@rendermode InteractiveServer

<style>
    .always-show-scrollbar .rz-data-grid-data {
        overflow-x: scroll !important;
    }
    /* Force scrollbar visible on webkit browsers (Chrome, Safari, Edge) */
    .always-show-scrollbar .rz-data-grid-data::-webkit-scrollbar {
        height: 12px;
        background-color: #f0f0f0;
    }
    .always-show-scrollbar .rz-data-grid-data::-webkit-scrollbar-thumb {
        background-color: #888;
        border-radius: 6px;
    }
    .always-show-scrollbar .rz-data-grid-data::-webkit-scrollbar-thumb:hover {
        background-color: #555;
    }
</style>

<h3>Column Types Demo</h3>

<p><em>Use the horizontal scrollbar below the grid to see the frozen "Employee Name" column stay in place.</em></p>

<div class="always-show-scrollbar">
<RadzenDataGrid Data="@employees" TItem="Employee" Style="max-width: 600px; height: 250px;" ColumnWidth="200px">
    <Columns>
        <RadzenDataGridColumn TItem="Employee" Property="Name" Title="Employee Name" Width="180px" Frozen="true" />
        <RadzenDataGridColumn TItem="Employee" Property="Department" Title="Department" Width="250px" />
        <RadzenDataGridColumn TItem="Employee" Property="Salary" Title="Salary" Width="180px" FormatString="{0:C}" TextAlign="global::Radzen.TextAlign.Right" />
        <RadzenDataGridColumn TItem="Employee" Property="HireDate" Title="Hire Date" Width="180px" FormatString="{0:d}" />
        <RadzenDataGridColumn TItem="Employee" Title="Status" Width="150px">
            <Template Context="employee">
                @if (employee.IsActive)
                {
                    <RadzenBadge BadgeStyle="BadgeStyle.Success" Text="Active" />
                }
                else
                {
                    <RadzenBadge BadgeStyle="BadgeStyle.Danger" Text="Inactive" />
                }
            </Template>
        </RadzenDataGridColumn>
        <RadzenDataGridColumn TItem="Employee" Title="Actions" Width="180px" Sortable="false">
            <Template Context="employee">
                <RadzenButton Text="Edit" ButtonStyle="global::Radzen.ButtonStyle.Primary" Size="global::Radzen.ButtonSize.Small"
                              Click="@(() => EditEmployee(employee.Id))" />
            </Template>
        </RadzenDataGridColumn>
    </Columns>
</RadzenDataGrid>
</div>

<div class="status-panel">
    <p>Last Action: @LastAction</p>
</div>

@code {
    [Parameter]
    public bool ShowInactiveEmployee { get; set; }

    private List<Employee> employees = new();
    public string LastAction { get; private set; } = "None";

    protected override void OnInitialized()
    {
        if (ShowInactiveEmployee)
        {
            employees = new List<Employee>
            {
                new Employee { Id = 1, Name = "Inactive User", Department = "Former", Salary = 50000, HireDate = new DateTime(2018, 1, 1), IsActive = false }
            };
        }
        else
        {
            employees = new List<Employee>
            {
                new Employee { Id = 1, Name = "Alice Johnson", Department = "Engineering", Salary = 95000, HireDate = new DateTime(2020, 3, 15), IsActive = true },
                new Employee { Id = 2, Name = "Bob Smith", Department = "Marketing", Salary = 75000, HireDate = new DateTime(2021, 7, 1), IsActive = true },
                new Employee { Id = 3, Name = "Carol Williams", Department = "Engineering", Salary = 105000, HireDate = new DateTime(2019, 1, 10), IsActive = true }
            };
        }
    }

    private void EditEmployee(int id)
    {
        LastAction = $"Edit clicked for employee {id}";
        StateHasChanged();
    }
}
